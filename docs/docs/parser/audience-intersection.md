# Пересечение аудитории

<div style="text-align: justify">
  <p>
    Данная функция поможет вам в более точном выявлении целевой аудитории. Вы сможете выбрать, оставить ли только тех пользователей, которые присутствуют сразу во всех интересующих вас сообществах, или, например, только в двух сообществах из четырех. А может быть, вы предпочтете оставить только уникальных пользователей -- тех, кто состоит только в одном из сообществ.
  </p>
</div>

<div style="text-align: justify">
  <p>
    Функция работает в двух режимах: с файлами и с базами. Она поддерживает обработку как текстовых файлов, так и файлов в формате <code>VKU</code>.
  </p>
</div>

---

## Режим работы с файлами

<div style="text-align: justify">
  <p>
    В режиме работы с файлами вы можете:
  </p>
  <ul class="styled">
    <li>Оставить тех пользователей, которые присутствуют сразу во всех файлах;</li>
    <li>Оставить только уникальных пользователей (присутствуют только в одном из файлов);</li>
    <li>Оставить тех пользователей, которые присутствуют в указанном количестве файлов (от и до);</li>
    <li>Объединить файлы в один файл (дубли будут удалены, т.е. каждый пользователь будет встречаться только один раз).</li>
  </ul>
  <p>
    На изображении ниже показано, что означает каждое действие на примере двух файлов. При работе с большим количеством файлов смысл остается тем же, но для простоты диаграммы мы использовали всего два файла.
  </p>
</div>

![](../../img/parser/audience-intersection/files_1.png)

<div style="text-align: justify">
  <p>
    В итоговом файле каждый пользователь будет представлен только один раз, без дубликатов.
  </p>
</div>

---

## Режим работы с базами

 <p>
    Что представляет из себя <code>База</code>? <code>База</code> - это набор файлов с пользователями. Вы выбираете файлы для первой и второй баз соответственно, после чего применяется та же логика, что и в режиме работы с файлами.
  </p>

<div style="text-align: justify">
  <p>
    Режим работы с базами позволяет вам:
  </p>

  <ul class="styled">
    <li>Оставить пользователей, присутствующих в обеих базах одновременно;</li>
    <li>Объединить базы (дубли будут удалены);</li>
    <li>Оставить только уникальных пользователей (встречаются только в одной из баз).</li>
  </ul>
</div>

![](../../img/parser/audience-intersection/bases_1.png)

---

## Когда и какой режим использовать?

<div style="text-align: justify">
  <p>
    Режим работы с файлами и режим работы с базами имеют свои применения в зависимости от целей пользователя. Мы приведём два простых примера, чтобы вам было понятнее.
  </p>
</div>

### Когда использовать режим работы с файлами?

<div style="text-align: justify">
  <p>
    Вы собрали участников из 20 сообществ с котиками. Теперь вы хотите оставить только тех пользователей, которые очень сильно любят котиков. В этом случае в режиме работы с файлами вы добавляете все файлы с участниками соответствующих сообществ. Затем выбираете <code>Оставить тех, кто есть сразу во всех файлах</code> либо <code>Оставить тех, кто есть минимум в 10, но максимум в 20 файлах</code>. Таким образом, вы получите настоящих ценителей котиков!
  </p>
</div>

### Когда использовать режим работы с базами?

<div style="text-align: justify">
  <p>
    Вы собрали участников из 20 сообществ с котиками, а также участников из 30 сообществ с собачками.Теперь вы хотите оставить тех пользователей, кто интересуется как котиками, так и собачками. В режиме работы с базами добавьте участников из сообществ с котиками в первую базу и участников из сообществ с собачками во вторую базу. Затем выберите <code>Оставить тех, кто есть одновременно в Базе 1 и Базе 2</code>. Таким образом, вы получите пользователей, которые любят и котиков, и собачек.
  </p>
</div>

---

## Пример запуска функции

<div style="text-align: justify">
  <p>
    Для этого примера мы подготовили два файла формата <code>VKU</code> с пользователями. Каждый из этих файлов содержит участников двух разных сообществ, собранных с использованием функции <a href="../group-members">Участники группы</a>. Давайте оставим только тех пользователей, которые состоят в двух сообществах.
  </p>
</div>

=== "Первое сообщество"
    <div style="text-align: justify">
      <p>
        В первом сообществе <code>98,214</code> пользователей.
      </p>
    </div>
    ![](../../img/parser/audience-intersection/example_1.png)

=== "Второе сообщество"
    <div style="text-align: justify">
      <p>
        Во втором сообществе <code>246,998</code> пользователей.
      </p>
    </div>
    ![](../../img/parser/audience-intersection/example_2.png)

<div style="text-align: justify">
  <p>
    Выберите вкладку <code>Пересечение аудитории</code> в Парсере и укажите настройки для запуска:
  </p>
  <ul>
    <li>Формат входных данных – <code>Файл PROPARS</code> для работы с файлами формата <code>VKU</code>;</li>
    <li>Результирующий файл – эта настройка задает имя файла, в который будут сохранены результаты;</li>
    <li>В разделе <code>Работа с файлами</code> выберите файлы с пользователями. В данном примере мы выбрали два файла;</li>
    <li>В качестве действия выберите <code>Оставить тех, кто есть сразу во всех файлах</code>.</li>
  </ul>
  <p>
    Затем нажмите кнопку <code>Запустить</code>.
  </p>
</div>

![](../../img/parser/audience-intersection/example_3.png)

<div style="text-align: justify">
  <p>
    Начнётся обработка данных, которая займет некоторое время (в нашем примере 20 секунд).
  </p>
</div>

![](../../img/parser/audience-intersection/example_4.png)

## Куда сохраняются результаты?

<div style="text-align: justify">
  <p>
    Результаты сохраняются в <code>(Папка проекта)\MergeFiles</code>. Имя файла будет таким, какое вы указали в настройках функции.
  </p>
</div>

![](../../img/parser/audience-intersection/results_1.png)

<div style="text-align: justify">
  <p>
    Откройте файл в Фильтраторе, чтобы ознакомиться с результатами. 
  </p>
</div>

![](../../img/parser/audience-intersection/results_2.png)

<div style="text-align: justify">
  <p>
    Из <code>345,212</code> пользователей в обеих группах состоит только <code>2,555</code>.
  </p>
</div>

---

!!! success "Спасибо, что дочитали до конца. Остались вопросы? <a href="../../../support">Свяжитесь с нами!</a>"